<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <style>
        body{
            background-color: #013230;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400' viewBox='0 0 800 800'%3E%3Cg fill='none' stroke='%2304848D' stroke-width='1'%3E%3Cpath d='M769 229L1037 260.9M927 880L731 737 520 660 309 538 40 599 295 764 126.5 879.5 40 599-197 493 102 382-31 229 126.5 79.5-69-63'/%3E%3Cpath d='M-31 229L237 261 390 382 603 493 308.5 537.5 101.5 381.5M370 905L295 764'/%3E%3Cpath d='M520 660L578 842 731 737 840 599 603 493 520 660 295 764 309 538 390 382 539 269 769 229 577.5 41.5 370 105 295 -36 126.5 79.5 237 261 102 382 40 599 -69 737 127 880'/%3E%3Cpath d='M520-140L578.5 42.5 731-63M603 493L539 269 237 261 370 105M902 382L539 269M390 382L102 382'/%3E%3Cpath d='M-222 42L126.5 79.5 370 105 539 269 577.5 41.5 927 80 769 229 902 382 603 493 731 737M295-36L577.5 41.5M578 842L295 764M40-201L127 80M102 382L-261 269'/%3E%3C/g%3E%3Cg fill='%2309FBFF'%3E%3Ccircle cx='769' cy='229' r='5'/%3E%3Ccircle cx='539' cy='269' r='5'/%3E%3Ccircle cx='603' cy='493' r='5'/%3E%3Ccircle cx='731' cy='737' r='5'/%3E%3Ccircle cx='520' cy='660' r='5'/%3E%3Ccircle cx='309' cy='538' r='5'/%3E%3Ccircle cx='295' cy='764' r='5'/%3E%3Ccircle cx='40' cy='599' r='5'/%3E%3Ccircle cx='102' cy='382' r='5'/%3E%3Ccircle cx='127' cy='80' r='5'/%3E%3Ccircle cx='370' cy='105' r='5'/%3E%3Ccircle cx='578' cy='42' r='5'/%3E%3Ccircle cx='237' cy='261' r='5'/%3E%3Ccircle cx='390' cy='382' r='5'/%3E%3C/g%3E%3C/svg%3E");
        }
    </style>
</head>

<body class="text-center mt-5">
    <div class="container-md rounded" style="background-color: white; padding: 0.1vw 0.5vw 1vw;">
        <h2 class="font-monospace mt-4">Perfil</h2>
        <div class="container row mt-5 mb-3">
            <div class="col">
                <input class="form-control" type="text" placeholder="Nombre" value="{{ user.first_name }}" readonly>
            </div>
            <div class="col">
                <input class="form-control" type="text" placeholder="Apellido" value="{{ user.last_name }}" readonly>
            </div>
        </div>
        <div class="container row mt-3 mb-3">
            <div class="col">
                <div class="container border rounded p-4 position-relative">
                    <div class="text-center">
                        <label id="originalAmount" class="text-decoration-underline font-weight-bold fs-2 d-none">${{cuenta.saldo}}</label>
                        <label id="hiddenAmount" class="font-weight-bold fs-2">$****,**</label>
                    </div>
                    <div class="position-absolute bottom-0 end-0">
                        <button class="btn btn-outline-secondary" onclick="toggleAmount()">üëÅ</button>
                    </div>
                </div>
            </div>
            
        </div>
        <div class="container row mt-3 mb-3">
            <label for="correo" class="form-label text-start">Mail:</label>
            <div class="input-group col-md-5">
                <input type="text" id="correo" class="form-control" placeholder="example@example.com"
                    aria-label="Recipient's username" aria-describedby="button-addon2" value="{{ user.email }}"
                    readonly>
                <button class="btn btn-outline-secondary" type="button" id="showProfile" data-bs-toggle="modal" data-bs-target="#emailModal">‚úè</button>
            </div>
        </div>
        <div class="container row mb-3">
            <label for="profesion" class="form-label text-start">Profesion:</label>
            <div class="input-group col-md-5">
                <input type="text" id="profesion" class="form-control" placeholder="Profesion" value="{{user.ocupacion_laboral}}"
                    aria-describedby="button-addon2" readonly>
                <button class="btn btn-outline-secondary" type="button" id="button-addon2" data-bs-toggle="modal" data-bs-target="#profesionModal">‚úè</button>
            </div>
        </div>
        <div class="container row mb-3">
            <label for="sueldo" class="form-label text-start">Sueldo:</label>
            <div class="input-group col-md-5">
                <span class="input-group-text">$</span>
                <input type="text" id="sueldo" class="form-control" placeholder="Salario" value="{{user.sueldo_mensual}}"
                    aria-label="Recipient's username" aria-describedby="button-addon2" readonly>
                <button class="btn btn-outline-secondary" type="button" id="button-addon2" data-bs-toggle="modal" data-bs-target="#sueldoModal">‚úè</button>
            </div>
        </div>
        <div class="container row mb-3">
            <label for="profesion" class="form-label text-start">Tipo De Cuenta:</label>
            <div class="input-group col-md-5">
                <input type="text" id="profesion" class="form-control" placeholder="Profesion" value="{{tipo_cliente.tipo}}"
                    aria-describedby="button-addon2" readonly>
            </div>
        </div>
        <div class="container row mb-3">
            <div class="col">
                <button type="button" class="btn btn-outline-secondary" onclick="window.location.href='{% url "password_reset" %}'">Resetear Contrase√±a</button>
            </div>
            <div class="col">
                <form method="post">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-outline-secondary" name="solicitar_mejora">Solicitar Mejora</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Modales para la Modificacion de Datos -->
    <!-- Modal Mail -->
        <div class="modal fade" id="emailModal" tabindex="-1" aria-labelledby="emailModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">Modificar Mail</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <form method="post" onsubmit="return validarFormularioMail()">
                        {% csrf_token %}
                        <div class="modal-body">
                            <div class="input-group mb-3">
                                <span class="input-group-text" id="inputGroup-sizing-default">Correo:</span>
                                <input type="text" class="form-control" id="nuevoMail" name="nuevoMail" aria-describedby="inputGroup-sizing-default">
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                            <button type="submit" class="btn btn-primary">Guardar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

    <!-- Modal Profesion -->
        <div class="modal fade" id="profesionModal" tabindex="-1" aria-labelledby="profesionModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">Modificar Profesion</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <form method="post" onsubmit="return validarFormularioProfesion()">
                        {% csrf_token %}
                        <div class="modal-body">
                            <div class="input-group mb-3">
                                <span class="input-group-text" id="inputGroup-sizing-default">Profesion:</span>
                                <input type="text" class="form-control" id="nuevaProfesion" name="nuevaProfesion" aria-describedby="inputGroup-sizing-default">
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                            <button type="submit" class="btn btn-primary">Guardar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

    <!-- Modal Sueldo -->
    <div class="modal fade" id="sueldoModal" tabindex="-1" aria-labelledby="sueldoModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Modificar Sueldo</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form method="post" onsubmit="return validarFormularioSueldo()">
                    {% csrf_token %}
                    <div class="modal-body">
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="inputGroup-sizing-default">Sueldo:</span>
                            <input type="number" class="form-control" id="nuevoSueldo" name="nuevoSueldo" aria-describedby="inputGroup-sizing-default">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Guardar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        function validarFormularioMail() {
            var nuevoMail = document.getElementById('nuevoMail').value
    
            if (nuevoMail.trim() === '') {
                alert('El campo de Correo no puede estar vac√≠o')
                return false
            }
            return true
        }

        function validarFormularioProfesion() {
            var nuevaProfesion = document.getElementById('nuevaProfesion').value
    
            if (nuevaProfesion.trim() === '') {
                alert('El campo de Profesion no puede estar vac√≠o')
                return false
            }
            return true
        }

        function validarFormularioSueldo() {
            var nuevoSueldo = document.getElementById('nuevoSueldo').value
    
            if (nuevaProfesion.trim() === '') {
                alert('El campo de Sueldo no puede estar vac√≠o')
                return false
            }
            return true
        }

        function toggleAmount() {
        var originalAmount = document.getElementById("originalAmount");
        var hiddenAmount = document.getElementById("hiddenAmount");

        if (originalAmount.classList.contains("d-none")) {
            originalAmount.classList.remove("d-none");
            hiddenAmount.classList.add("d-none");
        } else {
            originalAmount.classList.add("d-none");
            hiddenAmount.classList.remove("d-none");
        }
    }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
        integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
</body>

</html>